CREATE DATABASE `BRAINPOT`;
USE `BRAINPOT`;


CREATE TABLE `PAINT` (
    `ID` INT NOT NULL,
    `OWNERTEAM` INT NOT NULL,
    `OWNERUSER` INT NOT NULL,
    `CONTENT` TEXT NOT NULL,
    `LOC_MODI` TEXT ,
    FOREIGN KEY(`OWNERTEAM`) REFERENCES `TEAM`(`ID`) ON UPDATE CASCADE ON DELETE CASCADE,
    PRIMARY KEY (`ID`, `OWNERUSER`)
);

#데이터 입력용 쿼리문
INSERT INTO `PAINT`(`ID`,`OWNERTEAM`, `OWNERUSER`, `CONTENT`) VALUES (1, 6, 1, '혜으리');

#데이터 조회용 쿼리문
SELECT * FROM `PAINT`;

#페인트 위치 변경 프로시저
DELIMITER @@;
CREATE PROCEDURE `MODI_PAINT_LOC`(IN `PAINT_ID` INT, IN `OWNER_USER` INT, IN `UPDATE_TEXT` TEXT)
  BEGIN
    UPDATE `PAINT` SET PAINT.LOC_MODI = `UPDATE_TEXT` WHERE PAINT.ID = `PAINT_ID` AND PAINT.OWNERUSER = `OWNER_USER`;
  END @@;
DELIMITER ;

#### DANGER!! ####
DROP TABLE `PAINT`;